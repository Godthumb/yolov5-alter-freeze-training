# 实现yolov5交替冻结策略
## 策略来源与具体步骤
具体参考[ECV 2021 冠军方案解读：占道经营识别方案]<https://mp.weixin.qq.com/s/e07eRbNAkoDVRs7Q-rV0TA>
![训练策略](/assets/640.jpeg "训练策略")
简单来说，总共分为三步：
- 第一步：从<u>训练数据中随机选取一半</u>，进行yolov5常规训练，该过程中<u>所有的参数是同时更新的</u>。最后获得在a榜上最好模型model1。
- 第二步分布迭代1就是采用的冻结模块进行，<u>数据是随机选取训练数据的一半</u>，预训练模型是第一步常规训练的最好模型，按照<u>冻结训练方式进行</u>训练。<u>这个流程循环多次</u>，获得model2。
- 第三步分布迭代2同样<u>采用的是冻结模块进行</u>，<u>数据是所有训练数据</u>，由于参数已经学过，这时我们将学习率调小一个量级，同样也是按照冻结训练方式进行训练。这个流程<u>只循环一次</u>，获得最终的模型。

## 什么是交替冻结
- 冻结模块的特点就是将backbone和head轮流冻结，每epoch只更新未冻结部分的参数。我们以5个epoch为一个阶段，第一个epoch为head冻结，只训练backbone；第2~5个epoch为backbone冻结，只训练head。这样轮流更新backbone和head的参数

## 实现方式
具体实现方式很简单，主要修改dataloader和train的过程。